{% extends "blog/base.html" %}
{% block title %}Search: {{ query }}{% endblock %}
{% block content %}
<h1 class="mb-4 text-2xl font-bold">Search results{% if query %} for “{{ query }}”{% endif %}</h1>

{% if posts %}
  <div class="space-y-6">
    {% for post in posts %}
      <article class="rounded bg-white p-4 shadow">
        <h2 class="text-xl font-semibold">
          <a href="{% url 'post-detail' post.pk %}" class="hover:underline">{{ post.title }}</a>
        </h2>
        <p class="mt-2 text-gray-700 line-clamp-3">{{ post.content|truncatewords:40 }}</p>
        {% if post.tags.all %}
          <div class="mt-3 flex flex-wrap gap-2">
            {% for tag in post.tags.all %}
              <a href="{% url 'posts-by-tag' tag.slug %}"
                 class="inline-block rounded bg-gray-200 px-2 py-1 text-sm hover:bg-gray-300">
                #{{ tag.name }}
              </a>
            {% endfor %}
          </div>
        {% endif %}
      </article>
    {% endfor %}
  </div>
{% else %}
  <p>No posts found.</p>
{% endif %}
{% endblock %}
